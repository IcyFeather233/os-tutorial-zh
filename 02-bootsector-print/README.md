*你可能想事先谷歌的概念：中断，CPU寄存器*

**目标：让我们的之前沉默的引导扇区打印一些文本**

我们将改进我们的无限循环引导扇区，并在屏幕上打印一些内容。我们将为此引发一个中断。

在这个例子中，我们将把“Hello”这个词的每个字符写入寄存器`al`（`ax`的低位部分），将字节`0x0e`写入`ah`（`ax`的高位部分），并引发中断`0x10`，这是一个用于视频服务的通用中断。

`ah`中的`0x0e`告诉视频中断，我们实际想要运行的功能是“以tty模式写入`al`的内容”。

虽然实际上我们不能确定`ah`的内容是恒定的，因为在我们休眠时，CPU上可能运行其他进程，没有正确清理并留下垃圾数据在`ah`中，但我们在这个例子中不需要考虑这一点，因为我们是在CPU上唯一运行的东西。

我们的新引导扇区如下所示：

```nasm
mov ah, 0x0e ; 设置 AH 寄存器为 0x0e，表示 BIOS 的 TTY 模式（用于在屏幕上打印字符）
mov al, 'H'  ; 将字符 'H' 放入 AL 寄存器
int 0x10     ; 调用 BIOS 中断 0x10，打印 AL 寄存器中的字符
mov al, 'e'  ; 将字符 'e' 放入 AL 寄存器
int 0x10     ; 调用 BIOS 中断 0x10，打印 AL 寄存器中的字符
mov al, 'l'  ; 将字符 'l' 放入 AL 寄存器
int 0x10     ; 调用 BIOS 中断 0x10，打印 AL 寄存器中的字符
int 0x10     ; 再次调用 BIOS 中断 0x10，打印 AL 寄存器中的字符（此时 AL 中仍然是 'l'）
mov al, 'o'  ; 将字符 'o' 放入 AL 寄存器
int 0x10     ; 调用 BIOS 中断 0x10，打印 AL 寄存器中的字符

jmp $        ; 跳转到当前地址，形成无限循环

; 填充和魔数
times 510 - ($-$$) db 0 ; 填充 0 直到文件大小为 510 字节
dw 0xaa55               ; 写入魔数 0xaa55，表示这是一个可引导的扇区
```

你可以用`xxd file.bin`检查二进制数据。

无论如何，你知道该怎么做：

`nasm -fbin boot_sect_hello.asm -o boot_sect_hello.bin`

`qemu boot_sect_hello.bin` 或 `qemu-system-x86_64 boot_sect_hello.bin`

你的引导扇区将显示“Hello”并挂在一个无限循环中。